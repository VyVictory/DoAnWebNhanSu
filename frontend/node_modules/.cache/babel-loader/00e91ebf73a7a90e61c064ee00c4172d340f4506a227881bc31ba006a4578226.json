{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Qlvitri=()=>{const navigate=useNavigate();const[Chucvu,setChucvu]=useState([]);const UQuyenhang=sessionStorage.getItem('UQuyenhang');useEffect(()=>{axios.get('http://localhost:3000/chucvu').then(Response=>{if(Response.data){setChucvu(Response.data);}else{alert(Response.data);}}).catch(err=>console.log(err));},[]);const handleDelete=id=>{axios.delete(\"http://localhost:3000/chucvu/\"+id).then(Response=>{if(Response.data){// Update state after successful deletion\nsetChucvu(Chucvu.filter(cv=>cv._id!==id));navigate('/quanlycongtacnhanvien/quanlyvitri');}else{alert(\"Delete operation failed\");}}).catch(err=>console.log(err));};return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Chuc vu\"})}),/*#__PURE__*/_jsx(Link,{to:\"/quanlycongtacnhanvien/ThemChucvu\",className:\"btn btn-success\",children:\"Them chuc vu\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"T\\xEAn Ch\\u1EE9c V\\u1EE5\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ghi Ch\\xFA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quy\\u1EC1n H\\u1EA1ng\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Chucvu.slice()// Tạo một bản sao của mảng Chucvu để tránh thay đổi mảng gốc\n.sort((a,b)=>a.Quyenhang-b.Quyenhang)// Sắp xếp mảng theo Quyenhang từ nhỏ đến lớn\n.filter(cv=>cv.Quyenhang>UQuyenhang)// lọc quyền lớn hơn ra \n.map(cv=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:cv.Tenchucvu}),/*#__PURE__*/_jsx(\"td\",{children:cv.Ghichu}),/*#__PURE__*/_jsx(\"td\",{children:cv.Quyenhang}),/*#__PURE__*/_jsxs(\"td\",{className:\"td-tuychon\",children:[/*#__PURE__*/_jsx(Link,{to:'/quanlythongtinnhanvien/Chinhsuachucvu/&idcv='+cv._id,className:\"btn btn-info btn-sm me-2\",children:\"Chinh sua\"}),/*#__PURE__*/_jsx(\"button\",{className:\"all-bt-delete\",onClick:()=>handleDelete(cv._id),children:\"Xoa\"})]})]},cv._id))})]})})]});};export default Qlvitri;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Qlvitri","navigate","Chucvu","setChucvu","UQuyenhang","sessionStorage","getItem","get","then","Response","data","alert","catch","err","console","log","handleDelete","id","delete","filter","cv","_id","className","children","to","slice","sort","a","b","Quyenhang","map","Tenchucvu","Ghichu","onClick"],"sources":["C:/Users/vyvic/Downloads/New folder (3)/frontend/src/webfile/views/qlhoso/quanlycongtacnhanvien/qlvitri/Qlvitri.jsx"],"sourcesContent":["import React,{ useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport {Link, useNavigate } from 'react-router-dom'\r\nconst Qlvitri = () => {\r\n    const navigate = useNavigate()\r\n    const [Chucvu, setChucvu] = useState([])\r\n    const UQuyenhang = sessionStorage.getItem('UQuyenhang');\r\n    useEffect(() =>{\r\n        axios.get('http://localhost:3000/chucvu')\r\n        .then(Response => {\r\n            if(Response.data) {\r\n                setChucvu(Response.data);\r\n            } else {\r\n                alert(Response.data)\r\n            }\r\n        })\r\n        .catch(err => console.log(err))\r\n    }, []);\r\n\r\n    const handleDelete = (id) => {\r\n    axios.delete(\"http://localhost:3000/chucvu/\" + id)\r\n        .then(Response => {\r\n            if (Response.data) {\r\n                // Update state after successful deletion\r\n                setChucvu(Chucvu.filter(cv => cv._id !== id));\r\n                navigate('/quanlycongtacnhanvien/quanlyvitri');\r\n            } else {\r\n                alert(\"Delete operation failed\");\r\n            }\r\n        })\r\n        .catch(err => console.log(err));\r\n    };\r\n\r\n    return ( \r\n        <div className=\"\">\r\n            <div className=\"\">\r\n                <h3>Chuc vu</h3>\r\n            </div>\r\n            <Link to=\"/quanlycongtacnhanvien/ThemChucvu\" className=\"btn btn-success\">Them chuc vu</Link>\r\n            <div className=\"\">\r\n                <table className=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Tên Chức Vụ</th>\r\n                            <th>Ghi Chú</th>\r\n                            <th>Quyền Hạng</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            Chucvu.slice() // Tạo một bản sao của mảng Chucvu để tránh thay đổi mảng gốc\r\n                                .sort((a, b) => a.Quyenhang - b.Quyenhang) // Sắp xếp mảng theo Quyenhang từ nhỏ đến lớn\r\n                                .filter(cv => cv.Quyenhang > UQuyenhang)// lọc quyền lớn hơn ra \r\n                                .map(cv => (\r\n                                    <tr key={cv._id}>\r\n                                        <td>{cv.Tenchucvu}</td> \r\n                                        <td>{cv.Ghichu}</td>\r\n                                        <td>{cv.Quyenhang}</td>  \r\n                                        <td className='td-tuychon'>\r\n                                            <Link to={'/quanlythongtinnhanvien/Chinhsuachucvu/&idcv='+ cv._id} className='btn btn-info btn-sm me-2'>\r\n                                                Chinh sua\r\n                                            </Link>\r\n                                            <button className='all-bt-delete' onClick={() => handleDelete(cv._id)}>\r\n                                                Xoa\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n            \r\n     );\r\n}\r\n \r\nexport default Qlvitri;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}